<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>window</title>
</head>

<body>
  <h1>window</h1>
  <!-- 
        window객체(웹페이지의 모든 자원을 관리하는 객체)
        - BOM Browser Object Model - navigator, location, history, screen, XMLHttpRequest, frames, ...
        - DOM Document Object Model - document(html로 부터 변환된 tag객체)
        - javascript (Object, String, Array, ...)
        - 기타속성
        - 기타메소드
     -->
  <button onclick="test1();">open</button>
  <button onclick="test2();">close</button>
  <script>
    /**
     * open
     * - 새 탭 또는 팝업을 시작하는 메소드
     * - open(url, target, specs)
     * - target : window이름 또는 _self
     * - specs : 팝업 크기, 위치지정
     */
    let newWindow;
    const test1 = () => {
      // open("index.html");
      // open("http://naver.com", "_self");
      // newWindow = open("index.html", "javascript-index"); // 새 window객체의 name
      setTimeout(() => {
        newWindow = open("", "popup", "width=300px, height=300px, left=100px, top=200px");
      }, 3000); // 3초 후에 뜸
      console.log(newWindow);
    };
    const test2 = () => {
      newWindow.alert('부모창(opener)에서 보낸 메세지'); // non-block | blokc (newWindw콘솔 open되었을 때만!)
      newWindow.close();
    };
  </script>
  <hr>
  <button onclick="test3();">setTimeout</button>
  <button onclick="test4();">clearTimeout</button>
  <button onclick="test5();">@실습문제 - 타이머</button>
  <script>
    /**
     * setTimeout(callbackFucntion, millis):id
     */
    let timeoutId;
    const test3 = () => {
      timeoutId = setTimeout(() => {
        alert('하~이~');
      }, 3000);
      console.log("timeoutId : ", timeoutId);
    }
    const test4 = () => {
      clearTimeout(timeoutId);
      console.log(timeoutId + "번 timeout을 취소~~");
    };

    /**
     * @실습문제 - 타이머
     * - 사용자로부터 타이머메시지와 시간(초)를 입력받아 타이머를 생성
     */
    const test5 = () => {
      const msg = prompt("타이머 메세지를 입력해주세요~", "밥무라!");
      const sec = prompt("타이머 시간을 입력해주세요~", "2");
      timeoutId = setTimeout(() => {
        alert(msg);
      }, sec * 1000);
    };
  </script>
  <h2 id="count"></h2>
  <button onclick="test6();">setInterval</button>
  <button onclick="test7();">clearInterval</button>
  <h2 class="clock"></h2>
  <script>
    /**
     * setInterval(callbackFunction, millis):intervalId
     * - millis초 후에 millis초 간격으로 callbackFunction실행
     */
    let countNum = 10;
    count.innerHTML = countNum;
    let intervalId;
    const test6 = () => {
      intervalId = setInterval(() => {
        countNum--;
        count.innerHTML = countNum;
      }, 1000);
      console.log('intervalId : ', intervalId);
    };

    const test7 = () => {
      clearInterval(intervalId);
    };

    const clockString = () => {
      const f = (n) => n.toString().padStart(2,"0");       
      const now = new Date();
      const yyyy = now.getFullYear();
      const MM = f(now.getMonth() + 1);
      const dd = f(now.getDate());
      const hh = f(now.getHours());
      const mm = f(now.getMinutes());
      const ss = f(now.getSeconds());
      return `${yyyy}/${MM}/${dd} ${hh}:${mm}:${ss}`;
    };
    const displayClock = () => clock.innerHTML = clockString();   
    
    console.log(setInterval(displayClock, 1000)); 
  </script>

</body>

</html>